<html>
<head>
<title>test</title>
</head>
<body>
test.html
<script>
// メッセージ受信イベント
window.addEventListener('message', function(event) {
    console.log('message event  ' + event.data);
    if(window == window.parent) {
        event.source.postMessage('postMessage reply', event.origin);
    }
}, false);

console.log(window);
console.log(window.top);
console.log(window.parent);
console.log(window.top.parent);
document.write('<br>window==window.top ' + (window == window.top));
document.write('<br>window==window.parent ' + (window == window.parent));
document.write('<br>window==window.top.parent ' + (window == window.top.parent));
document.write('<br>window.top==window.parent ' + (window.top == window.parent));
document.write('<br>window.top==window.top.parent ' + (window.top == window.top.parent));
document.write('<br>window.parent==window.top.parent ' + (window.parent == window.top.parent));
document.write('<br>');
document.write('<br>window.location ' + (window.location));
try {
	document.write('<br>window.top.location ' + (window.top.location));
} catch (e) {
	document.write('<br>window.top.location ng');
}
try {
	document.write('<br>window.parent.location ' + (window.parent.location));
} catch (e) {
	document.write('<br>window.parent.location ng');
}
try {
	document.write('<br>window.top.parent.location ' + (window.top.parent.location));
} catch (e) {
	document.write('<br>window.top.parent.location ng');
}

if(window != window.parent) {
    window.parent.postMessage('postMessage send', '*');
}
</script>
<hr>
<iframe src='//junjun777.github.io/test.html'></iframe>
</body>
</html>
